

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MPU6050 &mdash; Wall-E Docs  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How bot balance itself?" href="../docs/source/7_self_balancing/README.html" />
    <link rel="prev" title="LSA - Light Sensor Array" href="../2_LSA/README.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Wall-E Docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../7_self_balancing/README.html">How bot balance itself?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7_self_balancing/README.html#formula-for-calculation-of-pitch-correction">Formula for calculation of pitch correction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7_self_balancing/README.html#algorithm">ALGORITHM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../7_self_balancing/README.html#description-of-the-functions">Description of the functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5_PWM/README.html">Pulse Width Modulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5_PWM/README.html#pwm-voltage-regulation">PWM: Voltage Regulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5_PWM/README.html#led-dimmer">LED Dimmer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5_PWM/README.html#pwm-for-speed-control">PWM for Speed Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5_PWM/README.html#motor-drivers">Motor Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../5_PWM/README.html#description-of-functions-used">Description of Functions Used</a></li>
<li class="toctree-l1"><a class="reference internal" href="../1_led_blink/README.html">LED BLINK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../4_switch_controlled_motor_normal/README.html"> </a></li>
<li class="toctree-l1"><a class="reference internal" href="../2_LSA/README.html">LSA - Light Sensor Array</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">MPU6050 Sensor</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#inertial-measurement-unit-imu">Inertial Measurement Unit (IMU)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#initializing-the-mpu6050">Initializing the MPU6050</a></li>
<li class="toctree-l2"><a class="reference internal" href="#accelerometer">Accelerometer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reading-accelerometer-data">Reading Accelerometer Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calculating-euler-angles-from-accelerometer">Calculating Euler Angles from Accelerometer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gyroscope">Gyroscope</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reading-gyroscope-data">Reading Gyroscope Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#complementary-filter">Complementary Filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reading-register-data">Reading Register Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#function-overview">Function Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#code-flowchart">Code Flowchart</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/7_self_balancing/README.html">How bot balance itself?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/7_self_balancing/README.html#formula-for-calculation-of-pitch-correction">Formula for calculation of pitch correction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/7_self_balancing/README.html#algorithm">ALGORITHM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/7_self_balancing/README.html#description-of-the-functions">Description of the functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/5_PWM/README.html">Pulse Width Modulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/5_PWM/README.html#pwm-voltage-regulation">PWM: Voltage Regulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/5_PWM/README.html#led-dimmer">LED Dimmer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/5_PWM/README.html#pwm-for-speed-control">PWM for Speed Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/5_PWM/README.html#motor-drivers">Motor Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/5_PWM/README.html#description-of-functions-used">Description of Functions Used</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/README.html">Table of Contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/README.html#about-the-workshop">About the Workshop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/README.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/README.html#examples">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/README.html#resources">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/README.html#contribution">Contribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/README.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/1_led_blink/README.html">LED BLINK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/4_switch_controlled_motor_normal/README.html"> </a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/2_LSA/README.html">LSA - Light Sensor Array</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs/source/3_MPU/README.html">MPU6050 Sensor</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Wall-E Docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">MPU6050</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/3_MPU/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="mpu6050">
<h1>MPU6050<a class="headerlink" href="#mpu6050" title="Link to this heading">ÔÉÅ</a></h1>
<p>The MPU6050 is a 6-axis motion tracking device that integrates a MEMS gyroscope and accelerometer and communicates via the I2C bus. It is commonly used in embedded systems for tracking motion and orientation.</p>
<ul class="simple">
<li><p><strong>I2C Communication</strong>: The system processor communicates with MPU6050 as an I2C master. Default address is 0x68 (can be changed to 0x69).</p></li>
<li><p><strong>Auxiliary Master Capability</strong>: MPU6050 can act as an I2C master to external sensors like a compass.</p></li>
<li><p><strong>Voltage Compatibility</strong>: It is a 3.3V device, directly compatible with ESP32.</p></li>
</ul>
<p><img alt="MPU6050 Diagram" src="https://lh5.googleusercontent.com/zS7Xrh9qRU7qUwhcF6BoJwzG7Pex7cvjD3yFqS_rJA35Nuj-rDkpS9uEt6EjqmGwzEEe3k-jNw2ENILxgxKWGLO5hW6j1er4oaKXk-ciVyrCC4GvzMDzwR9l0u5CrtsNRpAI7LRqf7U" /></p>
<section id="inertial-measurement-unit-imu">
<h2>Inertial Measurement Unit (IMU)<a class="headerlink" href="#inertial-measurement-unit-imu" title="Link to this heading">ÔÉÅ</a></h2>
<p>An IMU is used to detect motion and orientation. It typically includes:</p>
<ul class="simple">
<li><p>A <strong>gyroscope</strong> for angular velocity</p></li>
<li><p>An <strong>accelerometer</strong> for linear acceleration</p></li>
<li><p>Optionally, a <strong>magnetometer</strong></p></li>
</ul>
<p>The number of axes across these sensors defines its Degrees of Freedom (DoF). MPU6050 is a 6-DOF IMU (3-axis accelerometer + 3-axis gyroscope).</p>
</section>
<section id="initializing-the-mpu6050">
<h2>Initializing the MPU6050<a class="headerlink" href="#initializing-the-mpu6050" title="Link to this heading">ÔÉÅ</a></h2>
<p>When powered on, the MPU6050 starts in <strong>SLEEP mode</strong>. To use it:</p>
<ol class="arabic simple">
<li><p>Send a <strong>start condition</strong></p></li>
<li><p>Send <strong>device address (0x68)</strong> with write bit</p></li>
<li><p>Send register address <strong>0x6B (PWR_MGMT_1)</strong></p></li>
<li><p>Send <strong>0x00</strong> to disable sleep</p></li>
<li><p>Send <strong>stop condition</strong></p></li>
</ol>
<p><img alt="Power-Up Procedure" src="https://lh5.googleusercontent.com/HsUgcO1ojRlHZgbtl1Pyk7aWiUjs1x7XnhI5oYsa8C2gCqAbfqOGpr9fnjk0TBxWHmoIfJEQLqHUqe4Kh3KsjMLKSHAD6jQMsiEwrNyA3KLSeHiNLC3tDjzjAKN_nENu8FMp0tYS60E" /></p>
<p>The <strong>0x00</strong> byte clears register 107 (PWR_MGMT_1), disabling SLEEP and CYCLE modes, powering on the sensor.</p>
</section>
<section id="accelerometer">
<h2>Accelerometer<a class="headerlink" href="#accelerometer" title="Link to this heading">ÔÉÅ</a></h2>
<p>An <strong>accelerometer</strong> measures linear acceleration (in m/s¬≤ or g-forces). The MPU6050 uses a <strong>MEMS accelerometer</strong>:</p>
<ul class="simple">
<li><p>It has <strong>movable capacitor plates</strong> that change capacitance with movement</p></li>
<li><p>Voltage changes with capacitance ‚Üí interpreted as acceleration</p></li>
</ul>
<p><img alt="MEMS Accelerometer" src="https://lastminuteengineers.com/wp-content/uploads/arduino/MEMS-Accelerometer-Working.gif" /></p>
</section>
<section id="reading-accelerometer-data">
<h2>Reading Accelerometer Data<a class="headerlink" href="#reading-accelerometer-data" title="Link to this heading">ÔÉÅ</a></h2>
<p>Accelerometer values are stored in 6 registers:</p>
<ul class="simple">
<li><p>Each axis (X, Y, Z) has <strong>MSB + LSB = 16-bit signed integer</strong></p></li>
<li><p>These values are <strong>burst-read</strong> from the sensor</p></li>
</ul>
<p><img alt="Accelerometer Registers" src="https://lh4.googleusercontent.com/ePwQEj_TeMRQU83M7t2RsXGJD2q37z-B3kSlcLdU85L4XeKxkefT_fAYHNRpRjGOYI8r0bbQWd64I7emYms9x4ST6jEAdBlcC2wdibE" /></p>
</section>
<section id="calculating-euler-angles-from-accelerometer">
<h2>Calculating Euler Angles from Accelerometer<a class="headerlink" href="#calculating-euler-angles-from-accelerometer" title="Link to this heading">ÔÉÅ</a></h2>
<p>From accelerometer data, <strong>roll and pitch angles</strong> can be computed:</p>
<p>[ \theta = \arctan\left(\frac{A_{X.OUT}}{A_{Y.OUT}}\right) ]</p>
<p>(Reference: <a class="reference external" href="https://www.digikey.com/en/articles/using-an-accelerometer-for-inclination-sensing">DigiKey Inclination Sensing</a>)</p>
</section>
<section id="gyroscope">
<h2>Gyroscope<a class="headerlink" href="#gyroscope" title="Link to this heading">ÔÉÅ</a></h2>
<p>A <strong>gyroscope</strong> measures angular velocity (degrees/second). MPU6050 uses a <strong>MEMS gyroscope</strong> that works on the <strong>Coriolis effect</strong>.</p>
<p><a class="reference external" href="https://www.youtube.com/watch?v=ti4HEgd4Fgo&amp;amp;t=236s">Watch the Coriolis effect explanation</a></p>
</section>
<section id="reading-gyroscope-data">
<h2>Reading Gyroscope Data<a class="headerlink" href="#reading-gyroscope-data" title="Link to this heading">ÔÉÅ</a></h2>
<p>Same structure as the accelerometer:</p>
<ul class="simple">
<li><p>X, Y, Z axes ‚Üí each has MSB and LSB = 16-bit signed values</p></li>
<li><p>Sensor output is in raw units</p></li>
<li><p><strong>Sensitivity = 131 units/¬∞/s</strong> (default scale)</p></li>
<li><p><strong>Degrees/sec = raw_value / 131</strong></p></li>
<li><p>Angular displacement obtained by <strong>integrating over time</strong></p></li>
</ul>
<p><img alt="Gyroscope Readout" src="https://lh3.googleusercontent.com/dQ-SZL7kp5WEnFb-KXFH-FDvF7yv_2J28ycODkipFfFAAMN1lYAk0rPzKg7DaPcNDYk-BdUEJQSzApxxESam_7tnbsIOcLenjofFoUiCpAhsyuMtkWaFMcZPJrK5EMJyX9GCNHSNeeo" /></p>
</section>
<section id="complementary-filter">
<h2>Complementary Filter<a class="headerlink" href="#complementary-filter" title="Link to this heading">ÔÉÅ</a></h2>
<p>A complementary filter blends gyroscope and accelerometer data:</p>
<ul class="simple">
<li><p><strong>Gyroscope</strong> is accurate short-term but drifts over time</p></li>
<li><p><strong>Accelerometer</strong> is noisy short-term but stable long-term</p></li>
</ul>
<p>Blended output:
[ \theta = \alpha \cdot (\theta_{gyro}) + (1 - \alpha) \cdot (\theta_{accel}) ]</p>
<p>Typically, ( \alpha \approx 0.96 ) or higher for smoother tracking.</p>
</section>
<section id="reading-register-data">
<h2>Reading Register Data<a class="headerlink" href="#reading-register-data" title="Link to this heading">ÔÉÅ</a></h2>
<p>To burst read multiple registers:</p>
<ol class="arabic simple">
<li><p>Send start condition</p></li>
<li><p>Send device address + write bit</p></li>
<li><p>Send starting register address (e.g., 0x3B for accel X MSB)</p></li>
<li><p>Send repeated start + device address + read bit</p></li>
<li><p>Read successive bytes from device</p></li>
<li><p>Send NACK after last byte and stop condition</p></li>
</ol>
</section>
<section id="function-overview">
<h2>Function Overview<a class="headerlink" href="#function-overview" title="Link to this heading">ÔÉÅ</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">i2c_write(reg,</span> <span class="pre">data)</span></code></p></td>
<td><p>Write data to a given register</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">i2c_read_burst(start_reg,</span> <span class="pre">num_bytes)</span></code></p></td>
<td><p>Read multiple sequential registers</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">read_accel()</span></code></p></td>
<td><p>Read accelerometer data and return x, y, z values</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">read_gyro()</span></code></p></td>
<td><p>Read gyroscope data and return x, y, z values</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">calculate_angles()</span></code></p></td>
<td><p>Compute Euler angles from accel/gyro data</p></td>
</tr>
</tbody>
</table>
</section>
<section id="code-flowchart">
<h2>Code Flowchart<a class="headerlink" href="#code-flowchart" title="Link to this heading">ÔÉÅ</a></h2>
<p>A high-level flow of the code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Start ‚Üí I2C Init ‚Üí MPU6050 Init
           ‚Üì
    Read Accel Data ‚Üí Compute Angles (Roll, Pitch)
           ‚Üì
    Read Gyro Data  ‚Üí Integrate Gyro Readings
           ‚Üì
   Apply Complementary Filter
           ‚Üì
         Display Output
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../2_LSA/README.html" class="btn btn-neutral float-left" title="LSA - Light Sensor Array" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../docs/source/7_self_balancing/README.html" class="btn btn-neutral float-right" title="How bot balance itself?" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>